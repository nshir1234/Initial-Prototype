<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Kitchen – Tickets</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
  body { font-family: Arial; padding:20px; }
  .ticket { background:#f4f4f4; padding:12px; margin:12px 0; border-radius:8px; }
  button { padding:5px 10px; margin-top:10px; }
  .btn { background:#007bff; color:white; padding:8px 12px; border-radius:6px; text-decoration:none; }
</style>
</head>

<body>

<header>
  <h2>Kitchen – Tickets</h2>
  <a class="btn" href="server.html">Server</a>
</header>

<div id="ticketArea"></div>

<script>
function load() {
  const tickets = JSON.parse(localStorage.getItem("tickets") || "[]");
  let html = "";

  tickets.forEach(t => {
    html += `
      <div class="ticket">
        <strong>Table ${t.table}</strong><br>
        Items: ${t.items.join(", ")}<br>
        Note: ${t.note}<br>
        Status: ${t.status}<br>
        <button onclick="advance(${t.id})">Advance</button>
      </div>
    `;
  });

  document.getElementById("ticketArea").innerHTML = html;
}

function advance(id) {
  const tickets = JSON.parse(localStorage.getItem("tickets") || "[]");
  const t = tickets.find(x => x.id == id);

  if (t.status === "New") t.status = "Cooking";
  else if (t.status === "Cooking") t.status = "Ready";

  localStorage.setItem("tickets", JSON.stringify(tickets));
  load();
}

load();
</script>

</body>
</html>
